\documentclass[a4paper,UKenglish]{article}
\usepackage[letterpaper, margin=1.2in]{geometry}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{amsthm}
\usepackage{mathtools}
\usepackage{authblk}
\usepackage{pict2e}
\usepackage[mathscr]{euscript}
\usepackage{tikz-cd}
\tikzstyle{none}=[inner sep=0pt]
\tikzstyle{circ}=[circle,fill=black,draw,inner sep=3pt]
\usepackage{fancybox}
\usepackage[all,2cell]{xy} \UseAllTwocells
\usetikzlibrary{arrows, positioning, intersections}
\input{coya-tikz.tex}
\tikzset{%
	symbol/.style={%
		draw=none,
		every to/.append style={%
			edge node={node [sloped, allow upside down, auto=false]{$#1$}}}
	}
}
\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{theorem}{Theorem}
\newtheorem*{theorem*}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}

\def\rd{\rotatebox[origin=c]{90}{$\dashv$}} %rotate dash right
\def\ld{\rotatebox[origin=c]{-90}{$\dashv$}} %rotate dash left

\newcommand{\Th}{\mathrm{Th}}
\newcommand{\Gph}{\mathrm{Gph}}
\newcommand{\Set}{\mathrm{Set}}
\newcommand{\Grp}{\mathrm{Grp}}
\newcommand{\Cat}{\mathrm{Cat}}
\newcommand{\Mod}{\mathrm{Mod}}
\newcommand{\Mon}{\mathrm{Mon}}
\newcommand{\Alg}{\mathrm{Alg}}
\newcommand{\Pos}{\mathrm{Pos}}
\newcommand{\FinSet}{\mathrm{FinSet}}

\newcommand{\op}{\mathrm{op}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\pic}{$\pi$-calculus}
\newcommand{\V}{\mathscr{V}}
\newcommand{\W}{\mathscr{W}}
\newcommand{\C}{\mathscr{C}}
\newcommand{\D}{\mathscr{D}}
\newcommand{\T}{\mathscr{T}}
\newcommand{\K}{\mathscr{K}}
\newcommand{\J}{\mathscr{J}}
\newcommand{\pfk}{\pitchfork}

\begin{document}

\title{Operation through Enrichment}
\author{John C. Baez and Christian Williams\\University of California, Riverside}

\maketitle

\section{Introduction}

Imagine you are making an airplane. This giant metal bird will carry humans, lovers and dreamers, high above the earth. Their lives rest entirely on the soundness of your design. How can you ensure their safety? You cannot - nature is fraught with accident; yet almost every day, we soar by the millions without a problem. This is physics, engineering, and testing; but there are limitations - we cannot simulate these constructions in every possible circumstance, and \textit{prove} the security of our well-being.

The virtual world is another story. The computer scientist lacks the excuse of the airplane engineer: abstract thought is not burdened by the contingency of the physical world. Formal objects are defined and propositions are proven, once and for all - programs, languages, systems should be such objects. Yet so far, as we begin the connected era, this ideal is far from apparent. We've had bugs since the moth flew into the vacuum tube. Is there some basic limitation? No; only the inadequacy of unprincipled software development.

The problem: formal systems are often defined without intrinsic connection to how they actually \textit{operate} in practice. In computation, the \textit{structure} of the program is separate from the \textit{dynamics} - but this disparity is the only source of error. If these are intertwined as one mathematical object, the system can be proven \textit{correct by construction}. \textbf{Operational semantics} \cite{sos} is an essential tool in language design and verification, which formally specifies program behavior by \textit{labelled transition systems}, or labelled directed graphs:
\begin{center}\begin{tikzcd}(\lambda x.x+x \; 2) \ar{r}{\beta} & 2+2 \ar{r}{+} & 4\end{tikzcd}\end{center}

The idea is to \textit{reify} operational semantics via \textbf{enrichment} \cite{enrich}: in the categorical representation of an algebraic theory, the objects are types, and the morphisms are terms. Thus to represent the actual \textit{process} of computation, we need the higher-level notion of \textit{rewriting} one term into another - the hom-object or ``thing of morphisms" between two terms should be not a set but a \textit{category}-like structure, where these 2-morphisms represent \textit{rewrites}. For instance, the $SK$-combinator calculus is the ``abstraction-free'' $\lambda$-calculus:

\begin{center}
	\begin{minipage}{.2 \textwidth}
		\begin{tikzcd}
		3 \ar[bend right,swap,""name=1]{d}{(((Sx)y)z)} \ar[bend left,""name=2]{d}{((xz)(yz))}\\
		1 \ar[Rightarrow, from=1, to=2]
		\end{tikzcd}
	\end{minipage}\qquad \qquad
	\begin{minipage}{.2 \textwidth}
		\begin{tikzcd}
		2 \ar[bend right,swap,""name=1]{d}{((Kx)y)} \ar[bend left,""name=2]{d}{x}\\
		1 \ar[Rightarrow, from=1, to=2]
		\end{tikzcd}
	\end{minipage}
\end{center}

A \textbf{Lawvere theory} \cite{lawvere} defines an algebraic structure abstractly, as a category $\T$ generated by powers of a single object $S$ and morphisms $S^n \to S$ representing $n$-ary operations, satisfying equations. This represents the \textit{theory} of a kind of algebra, which can be modelled in a category $\C$ by a power-preserving functor $\mu:\T \to \C$. This is a very general notion of ``algebra'' - computational formalisms are also presented by generators and relations: in particular, a \textbf{term calculus} represents a \textit{formal language} by sorts, term constructors, and congruence rules.

Enriched Lawvere theories for operational semantics has been explored in the past. It was studied in the case of categories by Seely \cite{seely}, posets by Ghani and L\"uth \cite{ghani}, and others, for various related purposes. Here, we follow the original idea of operational semantics with \textbf{graph-enriched} Lawvere theories:

\[\begin{array}{rl}
\text{sorts} & \text{: generating object } S\\
\text{term constructors} & \text{: generating morphisms } S^n \to S\\
\text{structural congruence} & \text{: commuting diagrams}\\
\text{\textasteriskcentered \quad rewrite rules} & \text{: generating hom-edges\quad\textasteriskcentered}\\
\end{array}\]

There are many other useful enriching categories. Better yet, there are functors between them that allow the seamless \textit{transition} between different kinds of operational semantics. There is a \textit{spectrum} of enriching categories which forms a gradient of resolution for the semantics of term calculi. For an enriching category $\V$, an $\NN$-$\V$-theory is a $\V$-enriched Lawvere theory with $\NN$-arities (see $\S$4):\\\\
\textbf{Graphs} $\Gph$-theories represent ``small-step" operational semantics\\ - a hom-graph edge represents a \textit{single} term rewrite.\\
\textbf{Categories}: $\Cat$-theories represent ``big-step" operational semantics:\\ - identity and composition represent the \textit{reflexive-transitive} closure of the rewrite relation.\\
\textbf{Posets}: $\Pos$-theories represent ``full-step" operational semantics:\\ - a hom-poset boolean represents the \textit{existence} of a big-step rewrite.\\
\textbf{Sets}: $\Set$-theories represent denotational semantics:\\ - a hom-set element represents an \textit{equivalence class} of the symmetric closure of the big-step relation.\\\\
Operational semantics is modelled and unified by enriched Lawvere theories and canonical functors between the enriching categories. This provides a more systematic categorical representation of computation.

A motivating example is ``logic as a distributive law" \cite{ladl}, an algorithm for deriving a spatial-behavioral type system from a formal presentation of a computational calculus. Not only can essential properties such as soundness be proven, but modalities can be ``built-in" to express principles of the system.

This idea impacts more than computation, and even though these concepts have been well-known for decades, the practical significance has not been fully realized. With the modern ``proofs as programs" paradigm, this method applies to many subjects throughout mathematics. We illustrate this idea with several examples, and consider future potential.

\section{Lawvere Theories}
The ``theory of monoids'' can be defined without any reference to sets:
\[\begin{array}{rl}
\text{an object} & M\\
\text{an identity element} & e:1 \to M\\
\text{and multiplication} & m: M^2 \to M\\
\text{with associativity} & m \circ (m \times M) = m \circ (M \times m)\\
\text{and unitality} & e \circ M = M = M \circ e\\
\end{array}\]

\textit{Lawvere theories} formalize this idea. They were originally called \textit{finite product} theories: a skeleton $\NN$ of the the category of finite sets $\FinSet$ is the free category with finite coproducts on $1$ - every finite set is equal to the disjoint union of copies of $\{*\}$, and conversely $\NN^\op$ is the free category with finite \textit{products} on $1$; so, a category with finite products $\T$ equipped with a strictly product-preserving bijective-on-objects functor $\iota:\NN^\op \to \T$ is essentially a category generated by one object $\iota(1) = M$ and $n$-ary operations $M^n \to M$, as well as the projection and diagonal morphisms of finite products.

The abstraction of this definition is powerful: the syntax encapsulates the algebraic theory, \textit{independent} of semantics, and then one is free to realize $M$ as almost any mathematical object. For another category with finite products $\C$, a \textbf{model} of the Lawvere theory in $\C$ is a product-preserving functor $\mu: \T \to \C$. By the ``free'' property above, this functor is determined by $\mu(\iota(1)) = \mu(M) = X \in \C$. The models of $\T$ in $\C$ form a category $[\T,\C]_{fp}$, in which the morphisms are natural transformations. The general theory can be thereby modelled in many useful ways. For example, ordinary groups are models $\T_\Grp \to \Set$, but the theory can also be modelled in the category of topological spaces to form topological groups.

Lawvere theories and \textit{finitary monads} provide complementary representations of algebraic structures and computation, as discussed by Hyland and Power in \cite{ltam}, and they have been proven equivalent by Linton in \cite{linton}. Let $\iota: \NN^\op \to \T$ be a Lawvere theory and $\Mod = [\T,\Set]_{fp}$ be the category of models.

\begin{center}
	\begin{tikzcd}
	\Set \arrow[bend left,below]{rr}{F}
	& \ld &
	\arrow[bend left,above]{ll}{U} \Mod
	\end{tikzcd}
\end{center}

There is the \textit{underlying set} functor $U:\Mod \to \Set$ which sends each model $\mu: \T \to \Set$ to the image of the generating object, $\mu(\iota(1)) = X$ in $\Set$. There is the \textit{free model} functor $F:\Set \to \Mod$ which sends each finite set $n$ to the representable $\T(n,-):\T \to \Set$, and in general a set $X$ to the functor which sends $n$ to the set of all $n$-ary operations on $X$: $\{f(x_1,...,x_n)|f\in \T(n,1), x_i\in X\}$ - this is the \textit{filtered colimit} of representables indexed by the poset of finite subsets of $X$ \cite{nlab}, which pertains to conditions of finitude in $\S$3. These form the adjunction:

$$\Mod(F(n),\mu) \cong \mu(n) \cong \Set(n,U(\mu))$$ The left isomorphism is by the Yoneda lemma, and the right isomorphism is by the definition of power in $\Set$. Essentially, these are opposite ways of representing the $n$-ary operations of a given model. This adjunction induces a monad $T$ on $\Set$, which sends each set $X$ to the set of all terms in the theory on $X$ up to equality - the integral symbol is a \textit{coend}, essentially a coproduct quotiented by the equality the theory: $$T(X) = \int^{n\in \NN} \T(n,1) \times X^n$$

Conversely, for a monad $T$ on $\Set$, its \textit{Kleisli category} is the category of all \textit{free algebras} of the monad. There is a ``comparison'' functor $\Set \to Kl(T)$ which is the identity on objects and preserves products, so restricting to the subcategory of finite sets $\NN$ forms the canonical Lawvere theory corresponding to the monad. This restriction is what limits the equivalence to \textit{finitary} monads. There is a good explanation of all this in Milewski's categorical computation blog \cite{milew}. This generalizes to arbitrary \textit{locally finitely presentable} modelling categories $\C$, which is discussed in $\S$3.

The correspondence of Lawvere theories and finitary monads forms an equivalence of categories $$Law \cong Mnd_f$$ as well as the categories of models and algebras for every corresponding pair $(\T, T)$: $$\Mod(\T) \cong \Alg(T)$$ One motivation is to use monads is to define \textit{distributive laws}, as utilized in \cite{ladl}. The aforementioned references suffice; we do not need further details. 

\section{Enrichment}

Let $(\V,\otimes,I)$ be a monoidal category \cite{maclane}. A $\V$-enriched category or \textbf{$\V$-category} $\C$ is:
\[\begin{array}{rl}
\text{a collection of objects} & Obj(\C)\\
\text{a hom-object function} & \C(-,-):Obj(\C) \times Obj(\C) \to Obj(\V)\\
\text{composition morphisms} & \circ_{a,b,c}:\C(b,c) \otimes \C(a,b) \to \C(a,c) \quad \forall a,b,c \in Obj(\C)\\
\text{identity elements} & i_a:I\to\C(a,a) \quad \forall a \in Obj(\C)\\
\end{array}\]
such that composition is associative and unital. A \textbf{$\V$-functor} $F:\C \to \D$ is:
\[\begin{array}{rl}
\text{a function} & F_0: Obj(\C) \to Obj(\D)\\
\text{hom-functions} & F_{ab}: \C(a,b) \to \D(Fa,Fb) \quad \forall a,b \in \C\\
\end{array}\]
such that $F$ is compatible with composition and identity. A \textbf{$\V$-natural transformation} $\alpha: F \Rightarrow G$ is:
\[\begin{array}{rl}
\text{a family} & \alpha_a: I \to \D(Fa,Ga) \quad \forall a \in Obj(\C)\\
\end{array}\]
such that $\alpha$ is ``natural'' in $a$. See \cite{enrich} for reference.

Let $\V$ be a \textbf{closed symmetric monoidal category}, providing
\[\begin{array}{rl}
\text{internal hom} & [-,-]:\V^\op\otimes \V \to \V\\
\text{symmetry braiding} & \tau_{a,b}:a\otimes b\cong b\otimes a \quad \forall a,b \in Obj(\C)\\
\text{tensor-hom adjunction} & \V(a\otimes b,c) \cong \V(a,[b,c]) \quad \forall a,b,c \in Obj(\V)\\
\end{array}\]
Then $\V$ is itself a $\V$-category, denoted $\tilde{\V}$, with internal hom as the hom-object function. The tensor-hom adjunction generalizes to an \textit{action} of $\V$ on any $\V$-category $\C$: for $x \in Obj(\V)$ and $a,b \in Obj(\C)$, the \textbf{power} of $b$ by $x$ and the \textbf{copower} of $a$ by $x$ are objects of $\C$ which represent the adjunction:
$$\C(a\odot x,b) \cong \V(x, \C(a,b)) \cong \C(a,x\pfk b)$$
and $\C$ is $\V$-powered or copowered if all powers or copowers exist.

These are the two basic forms of enriched limit and colimit, which are not especially intuitive; but they are a direct generalization of a familiar idea in the category of sets. In $\Set$, the power is the ``exponential'' function set and the copower is the product. To generalize this to an action on other $\Set$-categories, note:
\[\begin{array}{lcr}
	X \pfk Y = & Y^X & \cong \prod_{x\in X}Y\\
	\\
	X \odot Y = & X \times Y & \cong \coprod_{y\in Y}X
\end{array}\]
So, categories are canonically $\Set$-powered or copowered by indexed products or coproducts of copies of an object, provided that these exist. So in the definition of Lawvere theory, even though it seems to be all about products, it is actually about \textit{powers}, because these constitute the \textit{arities} of the operations. This is precisely what is generalized in the enriched form. We will use exponential notation $x\pfk b = b^x$ for simplicity, and because the enriching categories under consideration are cartesian.

There are just a few more technicalities. * Given a $\V$-category $\C$, one often considers the Yoneda embedding into the $\V$-presheaf category $[\C^\op, \V]$, and it is important if certain subcategories are representable; generally, some properties of $\C$ depend on a condition of ``finitude.'' \cite{finite} A category is \textbf{locally finitely presentable} if it is the category of models for a \textit{sketch}, which is a generalization of Lawvere theory to finite limits, and an object is finitely presentable or \textbf{finite} if its representable functor is \textit{finitary}, or preserves filtered colimits. A $\V$-category $\C$ is locally finitely presentable if the underlying category $\C_0$ is LFP, $\C$ has finite powers, and $(-)^x: \C_0 \to \C_0$ is finitary. The details are not crucial - all categories to be considered are locally finitely presentable. Denote by $\V_f$ the subcategory of $\V$ of finite objects - in $\Gph$, these are simply graphs with finite vertices and edges.\\

\section{$\J$-$\V$ theories}
All of these abstract definitions culminate in the central concept: for a symmetric monoidal closed category $(\V,\otimes,I)$, a \textit{$\V$-enriched Lawvere theory} \`a la Power \cite{power} is a finitely-powered $\V$-category $\T$ equipped with a strictly power-preserving bijective-on-objects $\V$-functor $\iota:\V_f^\op \to \T$. A \textit{model} of a $\V$-theory is a finite-power $\V$-functor $\mu:\T \to \V$, and $\V$-natural transformations between them form the $\V$-category of models $[\T,\V]_{fp}$. The monadic adjunction and equivalence of $\S$2 generalize to $\V$-theories, as originally formulated by Power.

However, this requires $\T$ to have all powers of $\V_f$, i.e. the theory must have arities for every finite object of $\V$. It is certainly useful to include these generalized arities, but this introduces the question of how to \textit{present} such a theory; this is not nearly as straightforward as $n$-ary operations, and to the authors' knowledge a general method of enriched presentation does not yet exist. However, this is not needed for our purposes - we only need \textit{natural number} arities, while still retaining \textit{graph}-enrichment.

A very general and useful definition of enriched algebraic theory was introduced by Lucyshyn-Wright \cite{rbb}, which allows for theories to be parameterized by a \textbf{system of arities}, a full subcategory inclusion $j: \J \xhookrightarrow{} \V$ containing the monoidal unit and closed under tensor.

A $\V$-enriched algebraic theory with $j$-arities or \textbf{$\J$-$\V$ theory} is a $\V$-category $\T$ equipped with a $\J$-power preserving bijective-on-objects $\V$-functor $\tau:\J^\op \to \T$. This is essentially a $\V$-category with objects being $\J$-powers of a generating object $S = S^I$, $S^J$ for $J \in \J$. A \textbf{model} of this theory in a $\V$-category $\C$ is a finite-power preserving $\V$-functor $\T \to \C$.

Note: in the same way that every $n\in \NN^\op$ is a power of $1 \in \Set$, every $J\in \J$ is a power of the monoidal unit $I\in \V$: $$\J(a\odot I,b) \cong \V(I, \J(a,b)) \cong \J(a,b^I)$$ - substituting $a$ for $b$, the unital tensor or `copower' isomorphism on the left maps to the unital `cotensor' or power isomorphism. Since a $\J$-$\V$ theory preserves powers, this implies that every object of $\T$ is a power of the unit. ****

Here is an overview of the concepts: 

\[\begin{array}{ccccl}
j: & \J & \hookrightarrow & \V & \text{arities}\\
& & & \frown & \text{enrichment}\\
\tau: & \tilde{\J}^\op & \to & \T & \text{theory}\\
& & & (\downarrow) & \text{models}\\
& & & \C & \text{semantics}\\
\end{array}\]

This subsumes existing formulations; for example, Power's definition is the case $\J = \V_f$. A system of arities is \textbf{eleutheric} if left Kan extensions along $j$ exist and are preserved by $\V(K,-)$ for all $K \in Ob(\J)$. This is what is needed to have the essential \textit{monadicity} theorems: Lucyshyn-Wright proved that any $\J$-$\V$ theory for an eleutheric system of arities has a category of models for $\C = \V$ **** which is monadic over $\V$, and the induced $\V$-monad is ``j-ary'' in that it ``conditionally preserves $\J$-flat colimits'', i.e. can be thought of as a monad with $\J$ arities.

The usual kinds of arities were all proved to be eleutheric: in particular, finite cardinals. Hence, $\NN$-$\V$ theories have all of the nice relations with monads as ordinary Lawvere theories - and now they have the rich ``operational'' information of $\V$, and even this $\V$ itself is adaptable.

\section{Change of Base}

We propose a general framework in which one can \textit{transition} seamlessly between different forms of operational semantics: small-step, big-step, full-step, denotational:
\[
\begin{tikzcd}[column sep=small]
\Gph \arrow[bend left,below]{rr}{F_C}
& \ld &
\arrow[bend left,above]{ll}{U_G} \Cat \arrow[bend left,below]{rr}{F_P}
& \ld &
\arrow[bend left,above]{ll}{U_C} \Pos \arrow[bend left,below]{rr}{U_S}
& \rd &
\Set \arrow[bend left,above]{ll}{F_P}
\end{tikzcd}
\]
This is effected by a \textbf{monoidal functor} - a functor $$(F,\lambda,\upsilon): (\V,\otimes_\V,I_\V) \to (\W,\otimes_\W,I_\W)$$ which transfers the tensor and unit via the \textit{laxor} and \textit{unitor}
\[\begin{array}{rl}
\lambda: & F(a) \otimes_\W F(b) \to F(a\otimes_\V b)\\
\upsilon: & I_\W \to F(I_\V)
\end{array}\]
This induces a \textbf{change of base} functor $F^*:\V\Cat \to \W\Cat$ \cite{borceux}. If $f: \C \to \D \in \V\Cat$ is a $\V$-functor, then $F^*(f)_{obj} = f_{obj}$ and $F^*(f)_{hom} = F\circ f_{hom}$, and $F^*(C)$ is defined:

\[\begin{array}{rl}
\text{objects} & Obj(\C)\\
\text{hom-function} & F \circ \C(-,-)\\
\text{composition} & F(\circ_{a,b,c}) \circ \lambda\\
\text{identity} & F(i_a) \circ \upsilon\\
\end{array}\]

The change of base operation forms a 2-functor
\[\begin{array}{ccc}
\Mon\Cat & \xrightarrow{(-)^*} & 2\Cat\\
(\V\to\W) & \mapsto & (\V\Cat\to\W\Cat)
\end{array}\]
In particular, there is an important correspondence of adjunctions:
\begin{center}
	\begin{tikzcd}
	\Set \arrow[bend left,below]{rr}{-\odot I}
	& \ld &
	\arrow[bend left,above]{ll}{\V(I,-)} \V
	\arrow[maps to]{r}
	& \Cat \arrow[bend left,below]{rr}{(-\odot I)^*}
	& \ld &
	\arrow[bend left,above]{ll}{(\V(I,-))^*} \V\Cat
	\end{tikzcd}
\end{center}

Each set $X$ is represented in $\V$ as the $X$-indexed coproduct of the unit object, and conversely, each object $a$ of $\V$ has is represented in $\Set$ by the hom-set from the unit to $a$. This process induces the change of base whereby ordinary $\Set$-categories are converted to $\V$-categories, denoted $\C \mapsto \tilde{\C}$.

This is precisely what is needed: the ``arity'' category $\NN$ sits inside many enriching categories under various guises: as \textit{finite discrete graphs}, \textit{categories}, \textit{posets}, etc. For each $\V$ we can define the arity subcategory $\NN_\V$ to be the full subcategory of finite coproducts (copowers) of the unit object, and this remains essentially unchanged by the change-of-base above to the $\V$-category $\tilde{\NN}_\V$.

We only need to show that everything is simplified by restricting to this particular $\J$.

\section{Simplify with $\NN$-arities}

Most of the enriched algebraic theory literature deals with generalized arities; these will be important in time, but for present applications, we would like the benefits of enrichment with the simplicity of natural number arities. Here we provide some lemmas for this simplification.

Let $(\V,\times,I_\V)$ be a cartesian closed category with finite coproducts. Denote $\tilde{\V}$ to be $\V$ as a $\V$-category. Define $\NN_\V$ to be the full subcategory of finite coproducts of the unit object: $$n_\V = \coprod_{n \in \NN} I_\V$$ which is the \textit{copower} of $I_\V$ by a finite set $n \in \NN$, characterized by the universal property $$\V(n_\V,a) = \V(I_\V \odot n,a) \simeq \Set(n,\V(I_\V,a))$$ This is our ``system of arities'', the full monoidal subcategory $\J \hookrightarrow \V$. The point is that instead of thinking about fancy enriched powers, we just want to think about good old products.

\begin{lemma} $n_\V$-powers in $\tilde{\V}$ are equivalent to $n$-powers, i.e. $n$-fold products, in $\V$:
	\[\begin{array}{rclcl}
	\V(a,[n_\V,b]) & \simeq & \V(a\times n_\V,b) & &\\
	& = & \V(a\times (\coprod_n I_\V),b) & &\\
	& \simeq & \V(\coprod_n(a\times I_\V),b) & &\\
	& \simeq & \V(\coprod_n a,b) & \simeq & V(a,\prod_n b)\\
	\end{array}\]
\end{lemma}

Hence, the \textit{full} sub-$\V$-category $\tilde{\NN}_\V$ has hom-objects which are essentially sets:
\[\begin{tikzcd}
\left[n_\V,m_\V\right] \simeq \prod_n (\coprod_m I_\V) \;\; (`` \; \simeq m^n \;")
\end{tikzcd}\]

In $\V\Cat$, the objects of the theory $\T$ are $n_\V$-powers of a generating object $s$. Alas, we cannot simply say that ``$s^{n_\V} \simeq \prod_n s$'', because the latter does not make sense in the $\V$-category $\T$; products are characterized by a $\Set$-enriched universal property. However, we only need that homs into $s^{n_\V}$ are equivalent to $n$ homs into $s$:

\begin{lemma}
	Let $\T$ be a $\V$-category with $\NN_\V$-powers.
	\[\begin{array}{rclcl}
	\T(a,s^{n_\V}) & \simeq & [n_\V,\T(a,s)] & &\\
	& = & [\coprod_n I_\V,\T(a,s)] & &\\
	& \simeq & \prod_n [I_\V,\T(a,s)] & \simeq & \prod_n \T(a,s)
	\end{array}\]
\end{lemma}

If the functor $F:\V \to \W$ induces a change of base $F^*:\V\Cat \to \W\Cat$ which ``preserves $\NN$-$\V$-theories'' - i.e. for every $\NN$-$\V$-theory $\tau$, $F^*(\tau)$ is an $\NN$-$\W$-theory - then $F$ is a \textit{change of semantics}. Since the powers $s^{n_\V}$ are the only objects of $\T$, it suffices to determine when the above universal property is preserved. Because the homs of base change are defined $$F^*(\T)(a,s^{n_\V}) = F(\T(a,s^{n_\V}))$$ we only need $F$ to preserve finite products:

\[\begin{tikzcd}
F(\T(a,s^{n_\V})) \simeq F(\prod_n \T(a,s)) \simeq \prod_n F(\T(a,s)) = \prod_n F^*(\T)(a,s) \simeq F^*(\T)(a,s^{n_\W})
\end{tikzcd}\]

Then finally, we simply use $F^*(\tau)$ and the isomorphism $N: \NN_\V \simeq \NN_\W$ to construct a $\W$-functor which actually fits the definition of an $\NN-\W$ theory:

\begin{theorem}
	Let $\V$, $\W$ be cartesian closed categories, and let $F: \V \to \W$ be a cartesian functor which preserves coproducts of the unit object. Denote by $\tilde{N}: \tilde{\NN}_\W^\op \to F^*(\tilde{\NN}_\V^\op)$ the isomorphism which sends $n_\W \mapsto n_\V$ and is the identity on morphisms. Then $F$ is a \textbf{change of semantics}; i.e. for every $\NN$-$\V$ theory $\tau_\V: \NN_\V^\op \to \T$, the $\W$-functor $\tau_\W := F^*(\tau_\V) \circ \tilde{N}: \NN_\W^\op \to F^*(\T)$ is an $\NN$-$\W$ theory.
\end{theorem}
\begin{proof}
	The $\W$-functor $\tau_\W$ is clearly bijective-on-objects, because $\tau$ and $\tilde{N}$ are. And it preserves $\NN_\W$-powers by the previous calculation and:
\[\begin{array}{l}
	\tau_\W(\tilde{\NN}_\W^\op(I_\W^{m_\W},I_\W^{n_\W}))\\
	\simeq F^*(\T)(F^*(\tau_\V)(\tilde{N}(I_\W^{m_\W})), F^*(\tau_\V)(\tilde{N}(I_\W^{n_\W})))\\
	\simeq F^*(\T)(F^*(\tau_\V)(I_\V^{m_\V}), F^*(\tau_\V)(I_\V^{n_\V}))\\
	\simeq F(\T(\tau_\V(I_\V)^{m_\V}, \tau_\V(I_\V)^{n_\V}))\\
	\simeq \prod_n F(\T(\tau_\V(I_\V)^{m_\V}, \tau_\V(I_\V)))\\
	\simeq F^*(\T)(\tau_\V(I_\V)^{m_\V}, \tau_\W(I_\W)^{n_\W})
\end{array}\]
\end{proof}

%An $\NN$-$\V$ theory $\tau: \tilde{\NN_\V^\op} \to T$ is a $\V$-functor which preserves $\NN_\V$-powers, meaning: $$\tau(I_\V^{n_\V}) = \tau(I_\V)^{n_\V}$$ which is precisely analogous to a Lawvere theory $\theta$ preserving $\NN$-powers of $1$: $$\theta(1^n) = \theta(1)^n$$ with $\theta(1)$ being the generating object, e.g. ``$M$'' in the theory of monoids.

\[\begin{tikzcd}
	& \NN_\V \arrow[hookrightarrow]{d} & \NN_\W \arrow[hookrightarrow]{d}\\
	& \V \arrow["F"]{r} & \W\\
	\tilde{\NN}_\V^\op \arrow["\tau_\V"]{r} & T & F^*(\tilde{\NN}_\V^\op) \arrow["F^*(\tau_\V)"]{r} & F^*(\T)\\
	& & \tilde{\NN}_\W^\op \arrow["\tilde{N}"]{u} \arrow[swap,dotted,"\tau_\W"]{ru}
\end{tikzcd}\]

\section{Application}
Pseudomonoids \cite{pseudo} are important in higher category theory. A monoidal category is ``just a pseudomonoid in $\Cat$!'' The tensor is only associative and unital \textit{up to isomorphism}; these are now reified as 2-morphisms in a $\Cat$-enriched Lawvere theory, and can be understood as invertible rewrites of string diagrams:

\begin{center}
\ovalbox{\text{Th(PsMon)}}\\~\\
\begin{tikzcd}
M^2 \ar{r}{m} & M & \ar[swap]{l}{e} 1\\
\end{tikzcd}\\
\ovalbox{\begin{minipage}{.2 \textwidth}
\xymatrix{\assocl{.15 \textwidth}}
\end{minipage}}\qquad
\begin{minipage}{.2 \textwidth}
\begin{tikzcd}
M^3 \ar{r}{M\times m} \ar[swap,""name=L]{d}{m\times M} & M^2 \ar[""name=R]{d}{m}\\
M^2 \ar[swap]{r}{m} & M\\
\ar[Rightarrow, from=L, to=R, shorten <= 16pt, shorten >= 16pt]{a}{a}
\end{tikzcd}
\end{minipage}\qquad
\ovalbox{\begin{minipage}{.2 \textwidth}
\xymatrix{\assocr{.15 \textwidth}}
\end{minipage}}\\

\ovalbox{\begin{minipage}{.2 \textwidth}
\xymatrix{\unitl{.15 \textwidth}}
\end{minipage}}\qquad
\begin{minipage}{.2 \textwidth}
\begin{tikzcd}
M \ar{r}{e\times M} \ar[equal,""name=Q]{rd} \ar[swap]{d}{M\times e} & M^2 \ar[Rightarrow, to=Q]{l}{l} \ar{d}{m}\\
M^2 \ar[Rightarrow, to=Q, shorten >= 4pt]{r}{r} \ar[swap]{r}{m} & M
\end{tikzcd}
\end{minipage}\qquad
\ovalbox{\begin{minipage}{.2 \textwidth}
\xymatrix{\unitr{.15 \textwidth}}
\end{minipage}}
\end{center}

%\begin{minipage}{.2 \textwidth}
%\begin{tikzcd}
%M^4 \ar{rr}{M\times M\times m} \ar[swap,""name=L1]{rd}{M\times m\times M} \ar[swap,""name=L2]{dd}{m\times M\times M}
%& & M^3 \ar[""name=R1]{rd}{M\times m}\\
%\ar[Rightarrow, from=L1, to=R1, shorten <= 42pt, shorten >= 42pt, "M\times a"]
%& M^3 \ar{rr}{M\times m} \ar[""name=R2]{dd}{m\times M} & & M^2 \ar[""name=R3]{dd}{m}\\
%\ar[Rightarrow, swap, from=L2, to=R2, shorten <= 24pt, shorten >= 24pt, "a\times M"]
%\ar[Rightarrow, from=R2, to=R3, shorten <= 40pt, shorten >= 40pt, "a"]
%M^3 \ar[swap]{rd}{m\times M}\\
%& M^2 \ar{rr}{m} & & M
%\end{tikzcd}
%\end{minipage}\qquad
%
%\begin{minipage}{.2 \textwidth}
%\begin{tikzcd}
%M^4 \ar{rr}{M\times M\times m} \ar[swap,""name=L1]{dd}{m\times M\times M} & & M^3 \ar[swap,""name=R1]{dd}{m\times M} \ar{rd}{M\times m}\\ \ar[Rightarrow, from=L1, to=R1, shorten <= 40pt, shorten >= 40pt, "?"]
%& & & M^2 \ar[""name=R3]{dd}{m}\\ \ar[Rightarrow, swap, from=R1, to=R3, shorten <= 24pt, shorten >= 24pt, "a"]
%M^3 \ar{rr}{M\times m} \ar[swap, ""name=L2]{rd}{m\times M} & & M^2 \ar[""name=R2]{rd}{m}\\
%& M^2 \ar{rr}{m} & & M\\ \ar[Rightarrow, swap, from=L2, to=R2, shorten <= 40pt, shorten >= 40pt, "a"]
%\end{tikzcd}
%\end{minipage}

\newpage

\bibliographystyle{amsplain}
\bibliography{lawvere}

\end{document}